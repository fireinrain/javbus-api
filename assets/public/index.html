<!doctype html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JavBus API</title>
  <link rel="icon" href="/public/favicon.png" sizes="32x32"/>
  <link rel="icon" href="/public/favicon.svg" type="image/svg+xml"/>
  <link rel="stylesheet" href="/public/css/normalize.css"/>
  <link rel="stylesheet" href="/public/css/base.css"/>

  <style>
      /* é¡µé¢èƒŒæ™¯ */
      body {
          background: linear-gradient(135deg, #e8f0ff, #f8fbff 40%, #ffffff);
          min-height: 100vh;
          padding: 0;
          margin: 0;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      }

      .container {
          max-width: 900px;
          margin: 0 auto;
          padding: 40px 20px;
      }

      /* é¡¶éƒ¨ç”¨æˆ·æ  */
      .user-wrapper {
          position: fixed;
          top: 20px;
          right: 20px;
          display: flex;
          align-items: center;
          padding: 10px 20px;
          border-radius: 16px;
          backdrop-filter: blur(10px);
          background: rgba(255, 255, 255, 0.6);
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
          z-index: 20;
      }

      .btn {
          padding: 10px 20px;
          border-radius: 12px;
          border: none;
          background: var(--primary-color);
          color: white;
          cursor: pointer;
          transition: 0.25s;
          text-decoration: none;
          display: inline-block;
      }

      .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(52, 152, 219, 0.35);
          background: var(--primary-dark);
      }

      /* Hero åŒºåŸŸ */
      .hero-section {
          text-align: center;
          margin-bottom: 40px;
          padding-top: 40px;
      }

      .hero-section h1 {
          font-size: 2.6rem;
          margin-bottom: 16px;
          color: var(--primary-dark);
      }

      .hero-section p {
          font-size: 1.2rem;
          margin-bottom: 24px;
          color: #555;
      }

      /* å¡ç‰‡ */
      .card {
          background: white;
          padding: 32px;
          border-radius: 20px;
          box-shadow: 0 8px 30px rgba(0, 0, 0, 0.06);
          margin-bottom: 32px;
      }

      .api-section h2 {
          margin-bottom: 24px;
          display: flex;
          align-items: center;
          font-size: 1.6rem;
      }

      .api-section h2::before {
          content: "ğŸ“¡";
          margin-right: 10px;
      }

      /* API é¡¹ç›® */
      .api-item {
          margin-bottom: 32px;
          padding-bottom: 16px;
          border-bottom: 1px solid #eee;
      }

      .api-item:last-child {
          border-bottom: none;
      }

      .api-item h3 {
          font-size: 1.2rem;
          margin-bottom: 8px;
          color: var(--primary-dark);
      }

      .api-item p {
          margin: 6px 0 12px 0;
          color: #444;
      }

      /* API é“¾æ¥æŒ‰é’® */
      .api-link {
          display: block;
          background: #f1f7ff;
          padding: 12px 16px;
          border-radius: 12px;
          border-left: 4px solid var(--primary-color);
          margin-bottom: 8px;
          text-decoration: none;
          color: var(--primary-dark);
          transition: 0.25s;
          word-break: break-all;
      }

      .api-link:hover {
          background: #e4f0ff;
          transform: translateX(5px);
      }

      .list li {
          list-style: none;
          margin: 6px 0;
      }

      @media (max-width: 600px) {
          .card {
              padding: 20px;
          }

          .hero-section h1 {
              font-size: 2.2rem;
          }
      }
  </style>
</head>

<body>

<!-- é¡¶éƒ¨ç”¨æˆ·æ  -->
<div class="user-wrapper">
  <div class="login"><a class="btn" href="/public/login.html">ç™»å½•</a></div>
  <div class="user" style="display:none;">
<span class="username" style="
  display: inline-block;
  padding: 8px 16px;
  border-radius: 12px;
  background: rgba(52, 152, 219, 0.5); /* é¢œè‰²æ·¡ä¸€ç‚¹ï¼Œçªå‡ºä¸å¯ç‚¹å‡» */
  color: black; /* ç°è‰²æ–‡å­—è¡¨ç¤ºç¦ç”¨ */
  font-weight: 500;
  font-size: 0.95rem;
  line-height: 1.4;
  cursor: not-allowed; /* é¼ æ ‡å˜æˆç¦æ­¢ç¬¦å· */
  pointer-events: none; /* ç¦æ­¢æ‰€æœ‰é¼ æ ‡äº‹ä»¶ */
  transition: 0.25s;

"></span>
    <div style="width:1px;height:18px;background:#ccc;margin:0 12px;"></div>
    <button class="btn logout">é€€å‡º</button>
  </div>
</div>

<div class="container">

  <!-- Hero -->
  <div class="hero-section">
    <h1>JavBus API</h1>
    <p>RESTful API æœåŠ¡ï¼Œæä¾›å½±ç‰‡æ•°æ®ä¸ç£åŠ›é“¾æ¥ã€‚å¦‚æœæ‚¨çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜æœåŠ¡æ­£å¸¸è¿è¡Œï¼</p>
    <a class="btn" href="https://github.com/ovnrain/javbus-api#readme" target="_blank">æŸ¥çœ‹å®Œæ•´æ–‡æ¡£</a>
  </div>

  <!-- API åŒºåŸŸ -->
  <div class="card api-section">
    <h2>API ç¤ºä¾‹</h2>

    <div class="api-item">
      <h3>è·å–å½±ç‰‡åˆ—è¡¨</h3>
      <p>è·å–ç¬¬ä¸€é¡µå½±ç‰‡ï¼ˆå«ç£åŠ›ï¼‰ï¼š</p>
      <a class="api-link" href="/api/movies">/api/movies</a>

      <p>æŒ‰æ¼”å‘˜ç­›é€‰ï¼š</p>
      <a class="api-link" href="/api/movies?filterType=star&filterValue=qs6&magnet=all">
        /api/movies?filterType=star&filterValue=qs6&magnet=all
      </a>
    </div>

    <div class="api-item">
      <h3>æœç´¢å½±ç‰‡</h3>
      <p>æœç´¢â€œä¸‰ä¸Šâ€ï¼š</p>
      <a class="api-link" href="/api/movies/search?keyword=ä¸‰ä¸Š">
        /api/movies/search?keyword=ä¸‰ä¸Š
      </a>
    </div>

    <div class="api-item">
      <h3>å½±ç‰‡è¯¦æƒ…</h3>
      <p>ç¤ºä¾‹ï¼š</p>
      <ul class="list">
        <li><a class="api-link" href="/api/movies/IPX-585">IPX-585</a></li>
        <li><a class="api-link" href="/api/movies/IPZZ-023">IPZZ-023</a></li>
        <li><a class="api-link" href="/api/movies/IPX-451">IPX-451</a></li>
      </ul>
    </div>

    <div class="api-item">
      <h3>ç£åŠ›é“¾æ¥</h3>
      <p>ç¤ºä¾‹ï¼š</p>
      <ul class="list">
        <li><a class="api-link" href="/api/magnets/JUQ-434?gid=56326057355&uc=0">JUQ-434</a></li>
        <li><a class="api-link" href="/api/magnets/IPZZ-135?gid=56327757424&uc=0">IPZZ-135</a></li>
        <li>
          <a class="api-link" href="/api/magnets/SSNI-730?gid=42785257471&uc=0">SSNI-730</a>
          <ul class="list">
            <li><a class="api-link" href="/api/magnets/SSNI-730?...&sortBy=date&sortOrder=desc">æŒ‰æ—¥æœŸé™åº</a></li>
            <li><a class="api-link" href="/api/magnets/SSNI-730?...&sortBy=size&sortOrder=asc">æŒ‰å¤§å°å‡åº</a></li>
          </ul>
        </li>
      </ul>
    </div>

  </div>
</div>

<script>
  (function () {
    const user = document.querySelector('.user');
    const username = document.querySelector('.username');
    const login = document.querySelector('.login');
    const logoutBtn = document.querySelector('.logout');

    fetch('/api/user')
      .then(res => res.json())
      .then(res => {
        if (res.username) {
          username.textContent = res.username;
          user.style.display = "flex";
          login.style.display = "none";
        }
      });

    logoutBtn.addEventListener('click', () => {
      fetch('/api/logout', {method: 'POST'})
        .then(() => location.reload());
    });
  })();
</script>
</body>
</html>
